<?xml version="1.0" encoding="ISO-8859-1" ?>
<interface id="spec2vec" version="release_9">

  <view id="view_pairs" label="View Raw Pairs" group="Default Results Views">
        <blockRef id="main" type="view_summary_table"/>
    </view>

    <block id="view_summary_table" type="table_ss">
        <data>
            <source type="file" name="pairs/pairs.tsv"/>
            <parsers>
                <parser type="sortedTabular" sortBy="Cos_Score" operator="descending"/>
                <parser type="SQLite"/>
            </parsers>
        </data>
        <row>
            <column type="integer" field="Node1" label="Node1" precision="2"/>
            <column type="integer" field="Node2" label="Node2" precision="3"/>
            <column type="float" field="mz1" label="mz1" precision="3"/>
            <column type="float" field="mz2" label="mz2" precision="2"/>
            <column type="float" field="Cos_Score" label="Cos_Score" precision="3"/>
            <column type="float" field="MzDiff" label="MzDiff" precision="3"/>
        </row>
        <row expander="image">
            <column type="jscolumnspectrumviewer_spectrum_comparison" colspan="5">
                <parameter name="spectrum1_type" value="flatfile"/>
                <parameter name="spectrum1_file" file="[filename]"/>
                <parameter name="spectrum1_scan" value="[Node1]"/>
                <parameter name="spectrum2_type" value="flatfile"/>
                <parameter name="spectrum2_file" file="[filename]"/>
                <parameter name="spectrum2_scan" value="[Node2]"/>
            </column>
            <column type="jscolumnspectrumviewer" colspan="4" label="Query" width="550" height="350">
                <parameter name="file" file="[filename]"/>
                <parameter name="scan" value="[Node1]"/>
                <parameter name="compoundname" value="*..*"/>
            </column>
            <column type="jscolumnspectrumviewer" colspan="4" label="Query" width="550" height="350">
                <parameter name="file" file="[filename]"/>
                <parameter name="scan" value="[Node2]"/>
                <parameter name="compoundname" value="*..*"/>
            </column>
        </row>
        <row expander="USI Links" expandericontype="text">
            <column label="USI-Spectrum" type="genericurlgenerator" width="3"> \
                <parameter name="URLBASE" value="https://metabolomics-usi.ucsd.edu/mirror/"/>\
                <parameter name="REQUESTPARAMETER=usi1" value="mzspec:GNPS:TASK-{task}-[filename]:scan:[Node1]"/>
                <parameter name="REQUESTPARAMETER=usi2" value="mzspec:GNPS:TASK-{task}-[filename]:scan:[Node2]"/>
                <parameter name="LABEL" value="Mirror Match USI"/>
            </column>
            <column label="USI-Spectrum" type="genericurlgenerator" width="3"> \
                <parameter name="URLBASE" value="https://metabolomics-usi.ucsd.edu/spectrum/"/>\
                <parameter name="REQUESTPARAMETER=usi" value="mzspec:GNPS:TASK-{task}-[filename]:scan:[Node1]"/>
                <parameter name="LABEL" value="Query Spectrum USI"/>
            </column>
            <column label="USI-Library" type="genericurlgenerator" width="3"> \
                <parameter name="URLBASE" value="https://metabolomics-usi.ucsd.edu/spectrum/"/>\
                <parameter name="REQUESTPARAMETER=usi" value="mzspec:GNPS:TASK-{task}-[filename]:scan:[Node2]"/>
                <parameter name="LABEL" value="Query Spectrum USI"/>
            </column>
        </row>
    </block>

    <view id="download_graphml" label="Download Graphml" group="Downloads">
        <blockRef id="main" type="download_graphml"/>
    </view>
    <block id="download_graphml" type="dummydownload">
        <data>
            <source type="file" name="output_graphml/gnps_network.graphml"/>
            <parsers>
                <parser type="stream" contentType="text/xml"/>
            </parsers>
        </data>
    </block>


</interface>
